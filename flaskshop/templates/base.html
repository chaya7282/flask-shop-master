{% import '_macros.html' as macros %}
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}flask store{% endblock %}</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='build/storefront.css') }}">

      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"><link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css' rel='stylesheet'>
    <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/product_card/product_card3.css') }}">

    {% block stylesheet %}{% endblock stylesheet %}


<style type="text/css">

/* ============ desktop view ============ */
@media all and (min-width: 992px) {

	.dropdown-menu li{
		position: relative;
		 color: #d6d6d6;
         background-color: #3d3d3d;
	}
	.dropdown-menu .submenu{
		display: none;
		position: absolute;
		left:100%; top:-7px;
		 color: #d6d6d6;
         background-color: #3d3d3d;
	}
	.dropdown-menu .submenu-left{
		right:100%; left:auto;
		 color: #d6d6d6;
         background-color: #3d3d3d;
	}

	.dropdown-menu > li:hover{ color: #d6d6d6; background-color: #3d3d3d; }
	.dropdown-menu > li:hover > .submenu{
		display: block;
	}
}
/* ============ desktop view .end// ============ */

/* ============ small devices ============ */
@media (max-width: 991px) {

.dropdown-menu .dropdown-menu{
		margin-left:0.7rem; margin-right:0.7rem; margin-bottom: .5rem;
}

}
/* ============ small devices .end// ============ */

</style>
<script type="text/javascript">
//	window.addEventListener("resize", function() {
//		"use strict"; window.location.reload();
//	});


	document.addEventListener("DOMContentLoaded", function(){


    	/////// Prevent closing from click inside dropdown
		document.querySelectorAll('.dropdown-menu').forEach(function(element){
			element.addEventListener('click', function (e) {
			  e.stopPropagation();
			});
		})



		// make it as accordion for smaller screens
		if (window.innerWidth < 992) {

			// close all inner dropdowns when parent is closed
			document.querySelectorAll('.navbar .dropdown').forEach(function(everydropdown){
				everydropdown.addEventListener('hidden.bs.dropdown', function () {
					// after dropdown is hidden, then find all submenus
					  this.querySelectorAll('.submenu').forEach(function(everysubmenu){
					  	// hide every submenu as well
					  	everysubmenu.style.display = 'none';
					  });
				})
			});

			document.querySelectorAll('.dropdown-menu a').forEach(function(element){
				element.addEventListener('click', function (e) {

				  	let nextEl = this.nextElementSibling;
				  	if(nextEl && nextEl.classList.contains('submenu')) {
				  		// prevent opening link if link needs to open dropdown
				  		e.preventDefault();
				  		console.log(nextEl);
				  		if(nextEl.style.display == 'block'){
				  			nextEl.style.display = 'none';
				  		} else {
				  			nextEl.style.display = 'block';
				  		}

				  	}
				});
			})
		}
		// end if innerWidth

	});
	// DOMContentLoaded  end
</script>

  </head>

<body>
{% block header %}

<header class="sticky-top">

<!-- ============= COMPONENT ============== -->


 <!-- ============= COMPONENT ============== -->
 <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
 <div class="container-fluid">
 	 <a class="navbar-brand" href="#">Brand</a>
  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#main_nav"  aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  <div class="collapse navbar-collapse" id="main_nav">


	<ul class="navbar-nav">

		{% if current_user.is_authenticated %}

		{{ run_hook("flaskbb_tpl_user_nav_loggedin_before") }}

              <li class="nav-item"> <a class="nav-link"  href="{{ url_for('account.index') }}">
                Your Account</a></li>

         {% else %}

                <li class="nav-item"> <a class="nav-link"  href="{{ url_for('account.signup') }}">
                Register
              </a></li>
      {% endif %}
        {% if current_user.is_authenticated %}
       {% if current_user.can_edit() %}
             <li class="nav-item"> <a class="nav-link"  href="{{ url_for('dashboard.index') }}">
                Dashboard
                 <i class="fa fa-tachometer" aria-hidden="true"></i></a></li>
          {% endif %}
         {% endif %}

             {% for item in top_menu %}
                            {% with children=item.children %}
                             {% if children %}
                            <li class="nav-item dropdown">
                             <a class="nav-link dropdown-toggle" href="{{ item.url }}"  id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                              {{item.title }}
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">

                                 {% for child in children %}
                                   <a class="dropdown-item"  href="{{ child.url }}">{{child}}</a>
                                 {% endfor %}
                             </div>
                            </li>
                             {% else %}
                             <li class="nav-item"> <a class="nav-link"  href="{{ url_for('dashboard.index') }}">
                                 {{item.title }}</a></li>
                            {% endif %}
                            {% endwith %}
           {% endfor %}
             </ul>
    </div>
  </div> <!-- container-fluid.// -->
</nav>


<div class="container-fluid mb-2">
   {% if current_user.is_authenticated %}
   <a class="navbar-brand" href="{{ url_for('checkout.cart_index') }}">Shopping Cart<i class="fa fa-shopping-cart" style='font-size:36px' aria-hidden="true"></i>
   {% if current_user.is_authenticated and current_user_cart.quantity %}
      <span >{{ current_user_cart.quantity }}</span>
         {% else %}
            <span >0</span>
     {% endif %}
    </a>

    <a class="navbar-brand" href="{{ url_for('account.logout') }}">Log Out
		         <i class="fa fa-sign-out" aria-hidden="true"></i> </a>
   {% else %}
    <a class="navbar-brand" rel="nofollow" href="{{ url_for('account.login') }}">Log in
            <i class="fa fa-sign-in" aria-hidden="true"></i>
            </a></div>
    {% endif %}

</header>
{% endblock %}

    <div class="container maincontent">
      {% block topcontent %} {% endblock topcontent %}

      {% for message in get_flashed_messages(with_categories=True) %}
      <br>
      <div class="alert alert-{{ message[0] }}">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
        {{ message[1] }}
      </div>
      {% endfor %}

      {% block breadcrumb %}
      {% endblock breadcrumb %}
      {% block content %}

      {% endblock content %}
    </div>
 {% block footer %}
    <footer class="footer">
      <div class="footer__menus">
        <div class="container">
          <div class="row">
            {{ macros.footer_menu(bottom_menu) }}
            <div class="col-md-2 col-6">
              <ul class="menu">
                <li class="nav-item__dropdown menu__item">
                  <a>
                    <strong>
                      Account
                    </strong>
                  </a>
                  <hr />
                <li>
                  <a rel="nofollow" href="{{ url_for('checkout.cart_index') }}">
                    Your Cart
                  </a>
                </li>
                {% if current_user.is_authenticated %}
                {% if current_user.can_edit() %}
                <li>
                  <a href="{{ url_for('dashboard.index') }}" target="_blank" rel="noopener">
                    Dashboard
                  </a>
                </li>
                {% endif %}
                <li>
                  <a href="{{ url_for('account.index') }}">
                    Your account
                  </a>
                </li>

                <li>
                  <a href="{{ url_for('account.logout') }}">
                    Log out</a>
                </li>

                {% else %}
                <li>
                  <a rel="nofollow" href="{{ url_for('account.signup') }}">
                    Register
                  </a>
                </li>
                <li>
                  <a rel="nofollow" href="{{ url_for('account.login') }}">
                    Log in
                  </a>
                </li>
                {% endif %}
              </ul>
            </div>
            <div class="offset-md-2 col-md-4 col-12">
              <div class="footer__menus__social-container">
                <div class="footer__menus__social">
                  <a target="_blank" rel="noopener" class="social-footer" href="https://www.facebook.com/mirumeelabs/">
                    <svg data-src="{{ url_for('static', filename='img/facebook-logo.svg') }}" width="45px"
                      height="45px" />
                  </a>
                  <a target="_blank" rel="noopener" class="social-footer" href="https://github.com/mirumee/saleor">

                    <svg data-src="{{ url_for('static', filename='img/github-logo.svg') }}" width="45px"
                      height="45px" />
                  </a>
                  <a target="_blank" rel="noopener" class="social-footer" href="https://twitter.com/getsaleor">
                    <svg data-src="{{ url_for('static', filename='img/twitter-logo.svg') }}" width="45px"
                      height="45px" />
                  </a>
                  <a target="_blank" rel="noopener" class="social-footer" href="https://plus.google.com/+Mirumee">
                    <svg data-src="{{ url_for('static', filename='img/google-logo.svg') }}" width="45px"
                      height="45px" />
                  </a>
                  <a target="_blank" rel="noopener" class="social-footer" href="https://www.meetup.com/Mirumee-Talks/">
                    <svg data-src="{{ url_for('static', filename='img/meetup-logo.svg') }}" width="45px"
                      height="45px" />
                  </a>
                  <a target="_blank" rel="noopener" class="social-footer"
                    href="https://linkedin.com/company/mirumee-software">
                    <svg data-src="{{ url_for('static', filename='img/linkedin-logo.svg') }}" width="45px"
                      height="45px" />
                  </a>
                  <a target="_blank" rel="noopener" class="social-footer" href="https://dribbble.com/mirumee">
                    <svg data-src="{{ url_for('static', filename='img/dribbble-logo.svg') }}" width="45px"
                      height="45px" />
                  </a>
                  <a target="_blank" rel="noopener" class="social-footer"
                    href="https://www.instagram.com/explore/tags/mirumee/">
                    <svg data-src="{{ url_for('static', filename='img/instagram-logo.svg') }}" width="45px"
                      height="45px" />
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="footer__copy">
        <div class="container">
          <div class="row">
            <div class="col-4">
              <a href="{{ url_for('public.home') }}" class="footer__logo float-md-left">
                <svg data-src="{{ url_for('static', filename='img/logo-document.svg') }}" width='176px' height='38px' />
              </a>
            </div>
            <div class="col-8 footer__copy-text">{{ settings['project_copyright'].value }}</div>
          </div>
        </div>
      </div>
    </footer>
    {% endblock %}
    {% block footer_scripts %}
      <script src="{{ url_for('static', filename='build/storefront.js') }}"></script>
    {% endblock footer_scripts %}
  </body>

